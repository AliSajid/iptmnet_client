# This configuration file was automatically generated by Gitpod.
# Please adjust to your needs (see https://www.gitpod.io/docs/config-gitpod-file)
# and commit this file to your remote git repository to share the goodness with others.

tasks:
  - name: Import GPG Key
    init: >
      [[ ! -z $GPG_KEY  ]] &&
      gpg --verbose --batch --import <(echo $GPG_KEY|base64 -d) &&
      echo 'pinentry-mode loopback' >> ~/.gnupg/gpg.conf
  - name: Cargo Check
    init: cargo check
  - name: Run Cargo Check
    command: cargo watch -d 2 -w src -w Cargo.toml -x check -s 'touch .trigger'
  - name: Watch For Successful Check
    command: cargo watch -d 2 --no-gitignore -w .trigger -x  'run -- --search PAK1 --role both'
